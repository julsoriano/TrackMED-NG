<h1>{{ title }}</h1>

<p>This component demonstrates fetching data from the server. Ensure TrackMED API is started before running this page</p>

<p *ngIf="!items"><em>loading ...</em></p>

<h2>
  <span>{{ title }}</span>
  <span> Table</span>
</h2>

<div *ngIf="selectedItem">

  <h2>{{ selectedItem.desc | uppercase }} Details</h2>
  <!--<div><span>id: </span>{{selectedItem.id}}</div> -->
  <div>
    <label>
      Description:
      <input [(ngModel)]="selectedItem.desc" placeholder="desc">
    </label>
  </div>
  <div>
    <label>
      Created On:
      <input [(ngModel)]="selectedItem.createdAtUtc" placeholder="createdAtUtc">
    </label>
  </div>

</div>

<div>
  <table class='table' *ngIf="items">
    <thead>
      <tr>
        <th>Description</th>
        <th>Created Date</th>
      </tr>
    </thead>
    <tbody>
      <!-- The Angular class binding makes it easy to add and remove a CSS class conditionally.
       Just add [class.some-css-class]="some-condition" to the element you want to style

       When the current row item is the same as the selectedItem, Angular adds the selected CSS class.
       When the two items are different, Angular removes the class.
       See https://angular.io/tutorial/toh-pt2
      -->
      <tr *ngFor="let item of items; let i = index;"
          [class.selected]="item === selectedItem">
        <td>{{ item.desc }}</td>
        <td>{{ item.createdAtUtc | date }}</td>
        <td>
          <button class='glyphicon glyphicon-trash' (click)="onDelete(item, i)">
            <span class="tooltiptext">Delete</span>
          </button>
        </td>
        <td>
          <button class='glyphicon glyphicon-check' (click)="onSelect(item)">
            <span class="tooltiptext">{{ editText }}</span>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
